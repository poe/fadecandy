<!DOCTYPE html>

<html lang="en">

<head>

	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>

  <script type="text/javascript" src="jquery-2.1.4.js"></script>
  <script type="text/javascript" src="jquery-ui.js"></script>
  <script type="text/javascript" src="spectrum.js"></script>
  <link rel='stylesheet' href='spectrum.css'>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">

	<title>Illumacanth LED</title>

</head>

<body>

<h1> <strike>Fishbug</strike> Illumacanth LED interface </h1>

<canvas id="LED_map" width="600" height="600" style="border:1px solid #000000;">
</canvas>

<script>

$("#flat").spectrum({
    flat: true,
    showInput: true
});

$("#flatClearable").spectrum({
    flat: true,
    showInput: true,
    allowEmpty:true
});

var canvas = document.getElementById('LED_map');
var context = canvas.getContext('2d');

var LED = function(x,y,z,hue,saturation,lightness) {
  this.x = x;
  this.y = y;
  this.z = z;
  this.hue = hue;
  this.saturation = saturation;
  this.lightness = lightness;
  this.color();
}

LED.prototype.color = function(){
  return "hsl(" + this.hue.toString() + "," + this.saturation.toString() + "%," + this.lightness.toString() + "%)";
}

LED.prototype.draw = function(context){
  context.beginPath();
  context.arc(this.x, this.y, 3, 0, 2 * Math.PI, false);
  context.fillStyle = this.color();
  context.fill();
}

var LEDlist = [];

for(var x = 0; x < canvas.width; x+= 10){
  for(var y = 0; y < canvas.height; y+= 10){
    var this_led = new LED(x,y,0,0,0,0);
    LEDlist.push(this_led);
  }
}

function drawCanvas(LEDlist){
  for(var i = 0; i < LEDlist.length; i++){
    LEDlist[i].draw(context);
  }
}

function colorCircle(x1,y1,radius,LEDlist){
  for(var i = 0; i < LEDlist.length; i++){
    var led = LEDlist[i];
    var x2 = led.x;
    var y2 = led.y;
    var distance = Math.sqrt( (x2-=x1)*x2 + (y2-=y1)*y2 );
    led.hue = 230;
//    led.hue = (led.hue + (distance / radius) * 360 | 0) / 2;
//    led.saturation += (distance / radius) * 100 | 0;
    led.saturation = 100;
    led.lightness = (distance / radius) * 100 | 0;
  }
}

function randomizeLEDColors(LEDlist){
  for(var i = 0; i < LEDlist.length; i++){
    led = LEDlist[i];
    led.hue = Math.floor(Math.random()*360);
    led.saturation = 100;
    led.lightness = 60;
//    led.saturation += Math.floor(Math.random()*100);
//    led.lightness += Math.floor(Math.random()*100);
  }
}

function setBackgroundColor(hue,saturation,lightness,LEDlist){
  for(var i = 0; i < LEDlist.length; i++){
    var led = LEDlist[i];
    led.hue = hue;
    led.saturation = saturation;
    led.lightness = lightness;
  }
}


var Circles = [];

var Circle = function (x,y,radius) {
  this.x = x;
  this.y = y;
  this.radius = radius;
}



var radius = 0;
setInterval(function(){

  radius+=10;

  setBackgroundColor(0,0,0,LEDlist);


//  colorCircle(600,600,radius,LEDlist);
//  colorCircle(0,0,radius,LEDlist);

  randomizeLEDColors(LEDlist);

//  randomizeLEDColors(LEDlist);

  drawCanvas(LEDlist);
},1)

//randomizeLEDColors(LEDlist);
drawCanvas(LEDlist);

</script>

</body>

</html>


